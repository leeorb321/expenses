{% extends "layout.html" %}
{% block title %}Visualize Data{% endblock %}
{% block content %}

  <link href='http://fonts.googleapis.com/css?family=Oxygen:300' rel='stylesheet' type='text/css'>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.js"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='expenses_charts.js') }}"></script>

  <div class="page">
  <h1>Visualize Data</h1>

    <div id="chart-options">
      <form method="post" action="visualize">
      Chart Type:
        <select name="chart_type">
          <option value="pie">Pie</option>
          <option value="line">Line</option>
        </select>
        Date Range:
        <input type="date" name="date_from">
        <input type="date" name="date_to">
        <input type="submit" name="submit">
      </form>
    </div>

    <canvas id="all-data" width="600" height="400"></canvas>

    <script type="text/javascript">
      var canvas = document.getElementById("all-data").getContext("2d");

      var aggregatedData = {{data|tojson}};
      var allCategories = {{categories|tojson}};
      var type = "{{chartType}}";
      console.log("{{dateTo}}")
      console.log("{{dateFrom}}")
      var dateTo = "{{dateTo}}"
      var dateFrom = "{{dateFrom}}"

      drawCharts(aggregatedData, allCategories, type, "{{dateFrom}}", "{{dateTo}}");

    </script>

  </div>


{% endblock %}
