
<script type="text/javascript">
function checkAdd() {

  var selectedOption = $("select[name=category] option:selected").text();

  if (selectedOption === 'Add Category')
    $("#new_category").show();

  else
    $("#new_category").hide();
}
</script>

{% extends "layout.html" %}
{% block title %}Submit{% endblock %}
{% block content %}
    <script type="text/javascript">
      $("#submit-nav").addClass("active");
    </script>
  <div class=page>
    <div class=new-expense>

      <form id='new_expense_form' method='post' action='submit_expense' >
        <p>
      Person:     <select name='person'>
                  {% for person in persons %}
                      <option value='{{ person }}'>{{ person.capitalize() }}</option>
                  {% endfor %}
                  </select>
      Date:       <input type='date' name='expense_date'  id='expense_date'/>
      Amount:     <input type='number' min='0.01' step='0.01' name='amount' />
      </p><p>
      Category:   <select name='category' onChange='checkAdd()'>
                  {% for category in categories %}
                      <option value='{{ category }}'>{{ category.capitalize() }}</option>
                  {% endfor %}
                      <option value='add_category'>Add Category</option>
                  </select>
      Description: <input type='text' name='description' />
                  <input type='submit' value='Submit' />

        </p>
      </form>
       <form hidden id='new_category' method='post' action='add_category'>
          <input type='text' name='category_name'>
          <input type='submit' value='Add New Category'>
        </form>

    </div>
  </div>

  <script type="text/javascript">

    $('#expense_date')[0].valueAsDate = new Date();

  </script>

{% endblock %}
